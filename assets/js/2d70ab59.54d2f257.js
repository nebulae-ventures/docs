"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[988],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,A=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return t?a.createElement(A,l(l({ref:n},c),{},{components:t})):a.createElement(A,l({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},8215:function(e,n,t){t.d(n,{Z:function(){return r}});var a=t(7294);function r(e){var n=e.children,t=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},n)}},9877:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(7462),r=t(7294),o=t(2389),l=t(3725),i=t(6010),s="tabItem_LplD";function u(e){var n,t,o,u=e.lazy,c=e.block,p=e.defaultValue,d=e.values,m=e.groupId,A=e.className,f=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=d?d:f.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),g=(0,l.lx)(v,(function(e,n){return e.value===n.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===p?p:null!=(n=null!=p?p:null==(t=f.find((function(e){return e.props.default})))?void 0:t.props.value)?n:null==(o=f[0])?void 0:o.props.value;if(null!==k&&!v.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=(0,l.UB)(),h=b.tabGroupChoices,x=b.setTabGroupChoices,y=(0,r.useState)(k),N=y[0],w=y[1],T=[],I=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var C=h[m];null!=C&&C!==N&&v.some((function(e){return e.value===C}))&&w(C)}var E=function(e){var n=e.currentTarget,t=T.indexOf(n),a=v[t].value;a!==N&&(I(n),w(a),null!=m&&x(m,a))},B=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=T.indexOf(e.currentTarget)+1;t=T[a]||T[0];break;case"ArrowLeft":var r=T.indexOf(e.currentTarget)-1;t=T[r]||T[T.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":c},A)},v.map((function(e){var n=e.value,t=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===n?0:-1,"aria-selected":N===n,key:n,ref:function(e){return T.push(e)},onKeyDown:B,onFocus:E,onClick:E},o,{className:(0,i.Z)("tabs__item",s,null==o?void 0:o.className,{"tabs__item--active":N===n})}),null!=t?t:n)}))),u?(0,r.cloneElement)(f.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},f.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==N})}))))}function c(e){var n=(0,o.Z)();return r.createElement(u,(0,a.Z)({key:String(n)},e))}},9140:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return m}});var a=t(7462),r=t(3366),o=(t(7294),t(3905)),l=t(9877),i=t(8215),s=["components"],u={},c="Premi\xe8re interaction avec un smart contract",p={unversionedId:"dev/beginners/premiere-interaction-smart-contract",id:"dev/beginners/premiere-interaction-smart-contract",title:"Premi\xe8re interaction avec un smart contract",description:"Nous vous conseillons de lire le glossaire disponible sur cette page pour une meilleure compr\xe9hension des termes techniques.",source:"@site/docs/dev/beginners/premiere-interaction-smart-contract.md",sourceDirName:"dev/beginners",slug:"/dev/beginners/premiere-interaction-smart-contract",permalink:"/dev/beginners/premiere-interaction-smart-contract",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Les outils de base pour d\xe9vlopper avec web3 sur Avalanche",permalink:"/dev/beginners/installation-des-outils"},next:{title:"Tutoriel expert",permalink:"/dev/advanced/tuto"}},d={},m=[{value:"Affichez votre balance d&#39;AVAX",id:"affichez-votre-balance-davax",level:2},{value:"Echanger des AVAX contre des USDT.e",id:"echanger-des-avax-contre-des-usdte",level:2}],A={toc:m};function f(e){var n=e.components,u=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},A,u,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"premi\xe8re-interaction-avec-un-smart-contract"},"Premi\xe8re interaction avec un smart contract"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Nous vous conseillons de lire le glossaire disponible sur ",(0,o.kt)("a",{parentName:"strong",href:"/glossaire"},"cette page")," pour une meilleure compr\xe9hension des termes techniques.")),(0,o.kt)("p",null,"Nous allons maintenant voir comment interagir avec des smart contracts et effectuer de vraies transactions !"),(0,o.kt)("p",null,"D'abord qu'est-ce qu'un SC (Smart Contract) ?\n",(0,o.kt)("strong",{parentName:"p"},"TODO")),(0,o.kt)("h2",{id:"affichez-votre-balance-davax"},"Affichez votre balance d'AVAX"),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Afficher le code"),(0,o.kt)("div",null,(0,o.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("p",null,"On peut maintenant passer aux choses s\xe9rieuses :\nPour commencer on va avoir besoin d'importer la librairie Web3 :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from web3 import Web3\n")),(0,o.kt)("p",null,"Puis on l'initialise avec le rpc de l'api officielle :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'rpc = "https://api.avax.network/ext/bc/C/rpc"\nw3 = Web3(Web3.HTTPProvider(rpc))\n')),(0,o.kt)("p",null,"Maintenant essayons quelque chose de simple comme regarder la balance (nombre d'AVAX) d'une adresse :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'monAddresse = w3.toChecksumAddress("0xC41BA3190D043e2Ef434AC23287D9Ba68C58106a")\nbalance = w3.eth.get_balance(monAddresse)\nprint("Balance :",balance)\n')),(0,o.kt)("p",null,"R\xe9sultat : ",(0,o.kt)("inlineCode",{parentName:"p"},"Balance : 355259566500540782934")),(0,o.kt)("p",null,"On notera que la balance renvoy\xe9e comprend les 18 d\xe9cimales de pr\xe9cision de l'AVAX")),(0,o.kt)(i.Z,{value:"js",label:"Javascript",mdxType:"TabItem"},(0,o.kt)("p",null,"Dans votre fichier ",(0,o.kt)("em",{parentName:"p"},"index.js"),", ajoutez cette ligne pour importer la libraire web3 : "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const ethers = require("ethers")\n')),(0,o.kt)("p",null,"Connectez-vous au r\xe9seau Avalanche :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const provider = new ethers.providers.JsonRpcProvider('https://api.avax-test.network/ext/bc/C/rpc');\n")),(0,o.kt)("p",null,"Cr\xe9ez une fonction ",(0,o.kt)("strong",{parentName:"p"},"main")," qui contiendra votre code :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const main = async () => {\n    const balance = await provider.getBalance('0xC41BA3190D043e2Ef434AC23287D9Ba68C58106a');\n    console.log(balance);\n}\n")),(0,o.kt)("p",null,"Vous remarquerez que la balance n'est pas dans un format humainement lisible, formatons le en changeant cette ligne :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'console.log("Balance:", ethers.utils.formatEther(balance) + " AVAX");\n')),(0,o.kt)("p",null,"R\xe9sultat : ",(0,o.kt)("inlineCode",{parentName:"p"},"Balance: 91.119468275 AVAX")))))),(0,o.kt)("h2",{id:"echanger-des-avax-contre-des-usdte"},"Echanger des AVAX contre des USDT.e"),(0,o.kt)("p",null,"Nous allons effectuer un swap sur un DEX (ici TraderJoe)\nPour cela nous avons besoin de reprendre notre base de code vu pr\xe9c\xe9demment pour d\xe9finir notre instance web3"),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Afficher le code"),(0,o.kt)("div",null,(0,o.kt)(l.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'from web3 import Web3\n\nrpc = "https://api.avax.network/ext/bc/C/rpc"\nw3 = Web3(Web3.HTTPProvider(rpc))\n')),(0,o.kt)("p",null,"Puis nous avons besoin de d\xe9finir un objet repr\xe9sentant le contrat avec lequel on veut interragir (ici le routeur de TraderJoe) et pour cela nous avons besoin de son ABI ",(0,o.kt)("a",{parentName:"p",href:"https://snowtrace.io/address/0x60aE616a2155Ee3d9A68541Ba4544862310933d4#code"},"que nous pouvons trouver ici")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Copier l&#39;ABI",src:t(9109).Z,width:"1469",height:"372"})),(0,o.kt)("p",null,"Copiez le ensuite dans un fichier s\xe9par\xe9"),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Copier l&#39;ABI 2",src:t(2090).Z,width:"1877",height:"669"})),(0,o.kt)("p",null,"Une fois cela fait on peut d\xe9finir notre contrat"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'#Librairie pour lire le fichier au format json\nimport json\n\n#On charge le fichier de l\'ABI et on le passe dans une variable\nwith open("router.json") as f :\n    routerABI = json.load(f)\n\nrouterContract = w3.eth.contract(address="0x60aE616a2155Ee3d9A68541Ba4544862310933d4", abi=routerABI)\n')),(0,o.kt)("p",null,"Et voil\xe0 notre 1er contrat d\xe9fini ! Voyons maintenant comment interragir avec !\nIl existe 2 types de fonctions dans un SC :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"les ",(0,o.kt)("strong",{parentName:"li"},"view functions")," qui ne changent pas l'\xe9tat de la Blockchain et ne n\xe9cessitent donc pas de transaction : ce sont des fonctions qui renvoient juste une ou plusieurs valeurs"),(0,o.kt)("li",{parentName:"ul"},"les ",(0,o.kt)("strong",{parentName:"li"},"fonctions classiques")," qui modifient l'\xe9tat de l'\xe9tat et n\xe9cessitent donc une transaction et de payer des frais")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"#Exemple d'appel a une view function\nresult = routerContract.functions.factory().call()\nprint(result)\n")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Exemple view function",src:t(2975).Z,width:"1603",height:"81"})),(0,o.kt)("p",null,"Et voici ce que renvoie cette fonction par exemple (l'adresse du contrat factory de TraderJoe ici)"),(0,o.kt)("p",null,"Sauf que nous voulons effectuer un swap et donc ex\xe9cuter une transaction, par exemple nous allons swap 1 avax en USDT.e",(0,o.kt)("br",{parentName:"p"}),"\n","Pour \xe7a nous allons appeler la fonction swapExactAVAXForTokens"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'#Vous noterez que le mot clef derri\xe8re le nom de la fonction \n#Pour ex\xe9cuter une transaction est diff\xe9rent : buildTransaction\ntx = routerContract.functions.swapExactAVAXForTokens(\n    minimumTokensOut,  #Nombre de tokens que l\'on veut au minimum (si on re\xe7oit moins la tx revert)\n    path,              #Chemin emprunt\xe9 pour faire le swap (ici seulement WAVAX->USDT.e)\n    account,           #Quelle adresse doit recevoir les tokens\n    timestamp          #Timestamp jusqu\'auquel notre tx est valide\n    ).buildTransaction({\n        "nonce" : w3.eth.get_transaction_count(account), #Num\xe9ro de la tx pour ce compte\n        "from" : account,\n        "value":1*10**18 #Nombre d\'AVAX \xe0 swap (ne pas oublier les d\xe9cimales et donc multiplier par 10**18)\n    })\n')),(0,o.kt)("p",null,"Voil\xe0 l'architecture de notre fonction pour faire un simple swap sauf qu'il nous faut maintenant d\xe9finir les variables \xe0 l'int\xe9rieur"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'minimumTokensOut = 0 #Equivalent de 100% slippage sur l\'UI du DEX\npath = ["0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7", "0xc7198437980c041c805A1EDcbA50c1Ce5db95118"] #WAVAX USDT.e\naccount = "0xa3cF9F41Abd63A8391D9167a70Fde99013Dc7FE6" #Mon adresse\ntimestamp = 1704063600 #1er janvier 2024\n')),(0,o.kt)("p",null,"Il nous faut maintenant signer la transaction pour prouver que c'est bien nous qui en sommes l'origine",(0,o.kt)("br",{parentName:"p"}),"\n","J'ai ici mis ma clef priv\xe9e dans un autre fichier nomm\xe9 key.txt"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'with open("key.txt") as f :\n    privateKey = f.read()\n')),(0,o.kt)("p",null,"On peut maintenant signer la transaction et l'envoyer au r\xe9seau !"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'stx = w3.eth.account.sign_transaction(tx, private_key=privateKey)\ntxh = w3.eth.send_raw_transaction(stx.rawTransaction).hex()\nprint("Tx envoy\xe9 au r\xe9seau : https://snowtrace.io/tx/{}".format(txh))\n')),(0,o.kt)("p",null,"Plus qu'\xe0 tester notre code et ..."),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Exemple simple swap",src:t(9018).Z,width:"1009",height:"42"})),(0,o.kt)("p",null,"Et voil\xe0 notre tx est pass\xe9e ",(0,o.kt)("a",{parentName:"p",href:"https://snowtrace.io/tx/0xada54d756583576cedf77ad7faa8dea936905dd01ce6f2e5a27bf41bb59a5c69"},(0,o.kt)("em",{parentName:"a"},"(vous pouvez la voir ici)"))),(0,o.kt)("p",null,"N'h\xe9sitez pas \xe0 essayer chez vous sur Fuji ",(0,o.kt)("a",{parentName:"p",href:"/dev/ressources/rpc"},"(en changeant le rpc)"),".")),(0,o.kt)(i.Z,{value:"js",label:"Javascript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const ethers = require("ethers")\n\nconst PRIVATE_KEY = "XXX";\nconst provider = new ethers.providers.JsonRpcProvider(\'https://api.avax.network/ext/bc/C/rpc\');\nconst wallet = new ethers.Wallet(PRIVATE_KEY, provider);\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Vous pouvez \xe9galement mettre votre clef priv\xe9e dans un fichier externe (que l'on nommera key.txt) :")),(0,o.kt)("p",null,"Installez une libraire avec ",(0,o.kt)("inlineCode",{parentName:"p"},"npm install fs")," qui vous permettra de lire et \xe9crire des fichiers"),(0,o.kt)("p",null,"Ajoutez la librairire dans votre programme (en haut de votre programme) : ",(0,o.kt)("inlineCode",{parentName:"p"},'const fs = require("fs")')),(0,o.kt)("p",null,"Puis changez la ligne suivante : ",(0,o.kt)("inlineCode",{parentName:"p"},"const PRIVATE_KEY = fs.readFileSync('./key.txt', \"utf-8\");")),(0,o.kt)("p",null,"Puis nous avons besoin de d\xe9finir un objet repr\xe9sentant le contrat avec lequel on veut interragir (ici le routeur de TraderJoe) et pour cela nous avons besoin de son ABI ",(0,o.kt)("a",{parentName:"p",href:"https://snowtrace.io/address/0x60aE616a2155Ee3d9A68541Ba4544862310933d4#code"},"que nous pouvons trouver ici")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Copier l&#39;ABI",src:t(9109).Z,width:"1469",height:"372"})),(0,o.kt)("p",null,"Copiez le ensuite dans un fichier s\xe9par\xe9 nomm\xe9 ",(0,o.kt)("em",{parentName:"p"},"router.json")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Copier l&#39;ABI 2",src:t(2090).Z,width:"1877",height:"669"})),(0,o.kt)("p",null,"Une fois cela fait on peut d\xe9finir notre contrat"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// rajoutez cette ligne pour r\xe9cup\xe9rer le contenu de l\'ABI\nconst routerABI = require("./router.json");\n\n// On instencie le router\nconst routerAddress = "0x60aE616a2155Ee3d9A68541Ba4544862310933d4"; // router de Traderjoe\nconst router = new ethers.Contract(routerAddress, routerABI, wallet);\n')),(0,o.kt)("p",null,"Et voil\xe0 notre 1er contrat d\xe9fini ! Voyons maintenant comment interragir avec !\nIl existe 2 types de fonctions dans un SC :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"les ",(0,o.kt)("strong",{parentName:"li"},"view functions")," qui ne changent pas l'\xe9tat de la Blockchain et ne n\xe9cessitent donc pas de transaction : ce sont des fonctions qui renvoient juste une ou plusieurs valeurs"),(0,o.kt)("li",{parentName:"ul"},"les ",(0,o.kt)("strong",{parentName:"li"},"fonctions classiques")," qui modifient l'\xe9tat de l'\xe9tat et n\xe9cessitent donc une transaction et de payer des frais")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// Exemple d'appel a une view function\nconst main = async () => {    \n    const factoryAddress = await router.factory();\n    console.log(factoryAddress);\n\n    // la suite du code sera ici\n}\n\nmain();\n")),(0,o.kt)("p",null,"Executez votre programme avec : ",(0,o.kt)("inlineCode",{parentName:"p"},"node index.js")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Exemple view function",src:t(3697).Z,width:"470",height:"62"})),(0,o.kt)("p",null,"Et voici ce que renvoie cette fonction par exemple (l'adresse du contrat factory de TraderJoe ici)"),(0,o.kt)("p",null,"Sauf que nous voulons effectuer un swap et donc ex\xe9cuter une transaction, par exemple nous allons swap 1 avax en USDT.e",(0,o.kt)("br",{parentName:"p"}),"\n","Pour \xe7a nous allons appeler la fonction swapExactAVAXForTokens qui prend en param\xe8tre plus arguments : "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"amountOutMin : nombre de tokens que l'on veut au minimum (si on re\xe7oit moins la tx revert)"),(0,o.kt)("li",{parentName:"ul"},"path : chemin emprunt\xe9 pour faire le swap (ici seulement WAVAX->USDT.e)"),(0,o.kt)("li",{parentName:"ul"},"to : adresse qui re\xe7oit les tokens"),(0,o.kt)("li",{parentName:"ul"},"deadline : date (timestamp)jusqu'\xe0 laquelle notre transaction reste valide ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// ...\nconst amountIn = 0.01; // nombre d'AVAX que l'on veut \xe9changer\nconst amountOutMin = 0; // \xe9quivalent \xe0 100% de slippage sur l'UI du DEX\nconst path = [\"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\", \"0xc7198437980c041c805A1EDcbA50c1Ce5db95118\"]; // WAVAX, USDT.e\nconst to = wallet.address;\nconst deadline = Date.now() + 60 * 60 * 1000; // 1 heure\n\nconst gasPrice = await provider.getGasPrice();\n// formatage de notre variable en Big Number\nconst value = ethers.utils.parseUnits(amountIn.toString(), 'ether');\n\n// appel de la fonction swapExactAVAXForTokens avec nos variables\nconst tx = await router.swapExactAVAXForTokens(\n    amountOutMin,\n    path,\n    to,\n    deadline,\n    { value: value, gasLimit: 210000, gasPrice: gasPrice}\n);\n\nconsole.log('transaction sent...')\nconst receipt = await tx.wait();\nconsole.log(receipt);\nconsole.log(receipt.transactionHash);\n")),(0,o.kt)("p",null,"On peut maintenant envoyer la transaction au r\xe9seau !"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node index.js\n")),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Exemple simple swap",src:t(1523).Z,width:"889",height:"240"})))))))}f.isMDXComponent=!0},9109:function(e,n,t){n.Z=t.p+"assets/images/ABIRouter-f4b81315e0a05c91f372cbe08391b6a1.png"},2090:function(e,n,t){n.Z=t.p+"assets/images/ExampleABIRouter-70f6e75453679d2d700b46e41f66e7cd.png"},9018:function(e,n,t){n.Z=t.p+"assets/images/ExampleTx-fb59ebc79fe0ef6bcd97e4566997ae4b.png"},1523:function(e,n,t){n.Z=t.p+"assets/images/sendTransactionJS-413c5255596717b812c1114b3e1374b5.png"},2975:function(e,n,t){n.Z=t.p+"assets/images/viewFunction-5c0900558a147c43f09b4b098c3aa6d1.png"},3697:function(e,n){n.Z="data:image/png;base64,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"}}]);