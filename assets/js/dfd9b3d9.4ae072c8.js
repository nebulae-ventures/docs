"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[399],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),o=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},l=function(e){var t=o(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=o(n),m=a,f=d["".concat(u,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(f,c(c({ref:t},l),{},{components:n})):r.createElement(f,c({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,c[1]=s;for(var o=2;o<i;o++)c[o]=n[o];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3816:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return p}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),c=["components"],s={},u="Sandwich",o={unversionedId:"concepts/sandwich",id:"concepts/sandwich",title:"Sandwich",description:"Qu'est-ce qu'un \"Sandwich\" ?",source:"@site/docs/concepts/sandwich.md",sourceDirName:"concepts",slug:"/concepts/sandwich",permalink:"/concepts/sandwich",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"EVM",permalink:"/concepts/evm"}},l={},p=[{value:"Qu&#39;est-ce qu&#39;un &quot;Sandwich&quot; ?",id:"quest-ce-quun-sandwich-",level:2},{value:"Exemple",id:"exemple",level:2},{value:"Comment c&#39;est possible ?",id:"comment-cest-possible-",level:2},{value:"Comment s&#39;en pr\xe9munir ?",id:"comment-sen-pr\xe9munir-",level:2}],d={toc:p};function m(e){var t=e.components,s=(0,a.Z)(e,c);return(0,i.kt)("wrapper",(0,r.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"sandwich"},"Sandwich"),(0,i.kt)("h2",{id:"quest-ce-quun-sandwich-"},"Qu'est-ce qu'un \"Sandwich\" ?"),(0,i.kt)("p",null,"Un sandwich est le fait d'entourer une transaction par 2 autres."),(0,i.kt)("p",null,"Mais \xe0 quoi cela pourrait-il servir me direz vous, cela permet de modifier l'\xe9tat de la blockchain avant la transaction et de tirer parti de cette modification inatendue pour l'\xe9metteur de cette transaction."),(0,i.kt)("h2",{id:"exemple"},"Exemple"),(0,i.kt)("p",null,"Lorsque quelqu'un ach\xe8te beaucoup d'un token sur un DEX il impacte le prix de celui ci sur ce DEX, cela peut potentiellement g\xe9n\xe9rer un arbitrage entre le nouveau prix de ce DEX apr\xe8s la transaction et le prix sur d'autres plateformes. Cependant il y a encore plus efficace : faire bouger le prix avant que la personne ach\xe8te pour qu'il ach\xe8te \xe0 un prix plus \xe9lev\xe9 puis dump apr\xe8s sa transaction."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Sandwich",src:n(5492).Z,width:"1458",height:"126"}),"\n",(0,i.kt)("em",{parentName:"p"},"On peut ici voir l'attaquant acheter des tokens pour 3.66 puis la transaction d'achat d'un tiers et enfin la revente pour 0.2 de profit")),(0,i.kt)("h2",{id:"comment-cest-possible-"},"Comment c'est possible ?"),(0,i.kt)("p",null,"Mais comment c'est possible de faire passer une transaction avant et apr\xe8s dans le bloc me direz vous ?",(0,i.kt)("br",{parentName:"p"}),"\n","D\xe9j\xe0 il faut \xeatre au courant de la transaction que l'on veut sandwich et donc observer la ",(0,i.kt)("a",{parentName:"p",href:"/glossaire"},(0,i.kt)("em",{parentName:"a"},"mempool")),' et calculer le montant d\'achat/vente le plus optimal.\nApr\xe8s il faut placer ses transactions avant et apr\xe8s celle cibl\xe9e : de base les transactions dans un blocs sont sens\xe9es \xeatre tri\xe9es par gasPrice, il suffit donc de mettre un prix du gas un poil plus cher pour la 1\xe8re transaction puis un poil moins cher pour la 2e et ainsi "sandwicher" la transaction voulue.  '),(0,i.kt)("p",null,"En pratique c'est un peu plus compliqu\xe9 que cela car celui qui produit le bloc (le mineur sur ethereum ou le node validateur sur avalanche) peut mettre les transactions dans l'ordre qu'ils veulent ils peuvent donc s'associer avec des personnes poss\xe9dant des bots calculant les meilleurs sandwichs en temps r\xe9el et ainsi se partager les r\xe9compenses."),(0,i.kt)("h2",{id:"comment-sen-pr\xe9munir-"},"Comment s'en pr\xe9munir ?"),(0,i.kt)("p",null,'Pour \xe9viter de se "faire sandwich" il suffit de baisser le slippage, de ce fait si un bot malveillant essaye de faire un sandwich autour de votre transaction celle-ci va simplement \xe9chouer et il n\'en tirera aucun b\xe9n\xe9fices.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Slippage",src:n(8308).Z,width:"440",height:"381"}),(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("em",{parentName:"p"},"Ici le slippage est mis \xe0 0.1% de ce fait on accepte un changement de prix d'au plus 0.1%")))}m.isMDXComponent=!0},5492:function(e,t,n){t.Z=n.p+"assets/images/sandwich-64e95e9230d5548816ed8cf6cd45fb9f.png"},8308:function(e,t,n){t.Z=n.p+"assets/images/slippage-5e02e84ca054f43b05b734d6862ac978.png"}}]);