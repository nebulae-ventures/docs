<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">PremiÃ¨re interaction avec un smart contract | Nebulae Ventures Docs</title><meta data-react-helmet="true" property="og:image" content="http://docs.nebulae.ventures/img/logo-white.png"><meta data-react-helmet="true" name="twitter:image" content="http://docs.nebulae.ventures/img/logo-white.png"><meta data-react-helmet="true" property="og:url" content="http://docs.nebulae.ventures/dev/beginners/premiere-interaction-smart-contract"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="Bienvenue sur la documentation de Nebulae !"><meta data-react-helmet="true" property="og:title" content="PremiÃ¨re interaction avec un smart contract | Nebulae Ventures Docs"><meta data-react-helmet="true" name="description" content="Nous vous conseillons de lire le glossaire disponible sur cette page pour une meilleure comprÃ©hension des termes techniques."><meta data-react-helmet="true" property="og:description" content="Nous vous conseillons de lire le glossaire disponible sur cette page pour une meilleure comprÃ©hension des termes techniques."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://docs.nebulae.ventures/dev/beginners/premiere-interaction-smart-contract"><link data-react-helmet="true" rel="alternate" href="http://docs.nebulae.ventures/dev/beginners/premiere-interaction-smart-contract" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://docs.nebulae.ventures/dev/beginners/premiere-interaction-smart-contract" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.48440477.css">
<link rel="preload" href="/assets/js/runtime~main.4bf5e709.js" as="script">
<link rel="preload" href="/assets/js/main.259ab867.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-black.png" alt="Nebulae Ventures Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo-white.png" alt="Nebulae Ventures Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Nebulae Ventures Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="http://nebulae.ventures/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Nebulae Ventures<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossaire">Glossaire</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/dev/ressources/contracts">Dev</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/dev/ressources/contracts">Ressources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/dev/beginners/installation-des-outils">DÃ©butant</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/beginners/installation-des-outils">Les outils de base</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dev/beginners/premiere-interaction-smart-contract">PremiÃ¨re interaction avec un smart contract</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/dev/advanced/tuto">Expert</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/dev/smart-contracts/outils-de-base">Smart contracts</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/concepts/subnet">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/subnet">Subnet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/evm">EVM</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>PremiÃ¨re interaction avec un smart contract</h1><p><strong>Nous vous conseillons de lire le glossaire disponible sur <a href="/glossaire">cette page</a> pour une meilleure comprÃ©hension des termes techniques.</strong></p><p>Nous allons maintenant voir comment interagir avec des smart contracts et effectuer de vraies transactions !</p><p>D&#x27;abord qu&#x27;est-ce qu&#x27;un SC (Smart Contract) ?
<strong>TODO</strong></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="affichez-votre-balance-davax">Affichez votre balance d&#x27;AVAX<a class="hash-link" href="#affichez-votre-balance-davax" title="Direct link to heading">â€‹</a></h2><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>Afficher le code</summary><div><div class="collapsibleContent_i85q"><div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Javascript</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>On peut maintenant passer aux choses sÃ©rieuses :
Pour commencer on va avoir besoin d&#x27;importer la librairie Web3 :</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> web3 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Web3</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Puis on l&#x27;initialise avec le rpc de l&#x27;api officielle :</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">rpc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://api.avax.network/ext/bc/C/rpc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">w3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Web3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Web3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HTTPProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rpc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Maintenant essayons quelque chose de simple comme regarder la balance (nombre d&#x27;AVAX) d&#x27;une adresse :</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">monAddresse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">toChecksumAddress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0xC41BA3190D043e2Ef434AC23287D9Ba68C58106a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_balance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">monAddresse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Balance :&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">balance</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>RÃ©sultat : <code>Balance : 355259566500540782934</code></p><p>On notera que la balance renvoyÃ©e comprend les 18 dÃ©cimales de prÃ©cision de l&#x27;AVAX</p></div><div role="tabpanel" hidden=""><p>Dans votre fichier <em>index.js</em>, ajoutez cette ligne pour importer la libraire web3 : </p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ethers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ethers&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Connectez-vous au rÃ©seau Avalanche :</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> provider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ethers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">providers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">JsonRpcProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://api.avax-test.network/ext/bc/C/rpc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>CrÃ©ez une fonction <strong>main</strong> qui contiendra votre code :</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">main</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getBalance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;0xC41BA3190D043e2Ef434AC23287D9Ba68C58106a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">balance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Vous remarquerez que la balance n&#x27;est pas dans un format humainement lisible, formatons le en changeant cette ligne :</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Balance:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ethers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">formatEther</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">balance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; AVAX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>RÃ©sultat : <code>Balance: 91.119468275 AVAX</code></p></div></div></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_mojV" id="echanger-des-avax-contre-des-usdte">Echanger des AVAX contre des USDT.e<a class="hash-link" href="#echanger-des-avax-contre-des-usdte" title="Direct link to heading">â€‹</a></h2><p>Nous allons effectuer un swap sur un DEX (ici TraderJoe)
Pour cela nous avons besoin de reprendre notre base de code vu prÃ©cÃ©demment pour dÃ©finir notre instance web3</p><details class="details_lb9f alert alert--info details_BAp3" data-collapsed="true"><summary>Afficher le code</summary><div><div class="collapsibleContent_i85q"><div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Javascript</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> web3 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Web3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rpc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://api.avax.network/ext/bc/C/rpc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">w3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Web3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Web3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HTTPProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rpc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Puis nous avons besoin de dÃ©finir un objet reprÃ©sentant le contrat avec lequel on veut interragir (ici le routeur de TraderJoe) et pour cela nous avons besoin de son ABI <a href="https://snowtrace.io/address/0x60aE616a2155Ee3d9A68541Ba4544862310933d4#code" target="_blank" rel="noopener noreferrer">que nous pouvons trouver ici</a></p><p><img alt="Copier l&amp;#39;ABI" src="/assets/images/ABIRouter-f4b81315e0a05c91f372cbe08391b6a1.png" width="1469" height="372"></p><p>Copiez le ensuite dans un fichier sÃ©parÃ©</p><p><img alt="Copier l&amp;#39;ABI 2" src="/assets/images/ExampleABIRouter-70f6e75453679d2d700b46e41f66e7cd.png" width="1877" height="669"></p><p>Une fois cela fait on peut dÃ©finir notre contrat</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Librairie pour lire le fichier au format json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#On charge le fichier de l&#x27;ABI et on le passe dans une variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;router.json&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    routerABI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">routerContract </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">contract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">address</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0x60aE616a2155Ee3d9A68541Ba4544862310933d4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> abi</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">routerABI</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Et voilÃ  notre 1er contrat dÃ©fini ! Voyons maintenant comment interragir avec !
Il existe 2 types de fonctions dans un SC :</p><ul><li>les <strong>view functions</strong> qui ne changent pas l&#x27;Ã©tat de la Blockchain et ne nÃ©cessitent donc pas de transaction : ce sont des fonctions qui renvoient juste une ou plusieurs valeurs</li><li>les <strong>fonctions classiques</strong> qui modifient l&#x27;Ã©tat de l&#x27;Ã©tat et nÃ©cessitent donc une transaction et de payer des frais</li></ul><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Exemple d&#x27;appel a une view function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> routerContract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">functions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><img alt="Exemple view function" src="/assets/images/viewFunction-5c0900558a147c43f09b4b098c3aa6d1.png" width="1603" height="81"></p><p>Et voici ce que renvoie cette fonction par exemple (l&#x27;adresse du contrat factory de TraderJoe ici)</p><p>Sauf que nous voulons effectuer un swap et donc exÃ©cuter une transaction, par exemple nous allons swap 1 avax en USDT.e<br>
<!-- -->Pour Ã§a nous allons appeler la fonction swapExactAVAXForTokens</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#Vous noterez que le mot clef derriÃ¨re le nom de la fonction </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Pour exÃ©cuter une transaction est diffÃ©rent : buildTransaction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> routerContract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">functions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">swapExactAVAXForTokens</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    minimumTokensOut</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#Nombre de tokens que l&#x27;on veut au minimum (si on reÃ§oit moins la tx revert)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">#Chemin empruntÃ© pour faire le swap (ici seulement WAVAX-&gt;USDT.e)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">#Quelle adresse doit recevoir les tokens</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamp          </span><span class="token comment" style="color:#999988;font-style:italic">#Timestamp jusqu&#x27;auquel notre tx est valide</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">buildTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;nonce&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_transaction_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#NumÃ©ro de la tx pour ce compte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;from&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> account</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">**</span><span class="token number" style="color:#36acaa">18</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#Nombre d&#x27;AVAX Ã  swap (ne pas oublier les dÃ©cimales et donc multiplier par 10**18)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>VoilÃ  l&#x27;architecture de notre fonction pour faire un simple swap sauf qu&#x27;il nous faut maintenant dÃ©finir les variables Ã  l&#x27;intÃ©rieur</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">minimumTokensOut </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#Equivalent de 100% slippage sur l&#x27;UI du DEX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0xc7198437980c041c805A1EDcbA50c1Ce5db95118&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#WAVAX USDT.e</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0xa3cF9F41Abd63A8391D9167a70Fde99013Dc7FE6&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#Mon adresse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timestamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1704063600</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#1er janvier 2024</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Il nous faut maintenant signer la transaction pour prouver que c&#x27;est bien nous qui en sommes l&#x27;origine<br>
<!-- -->J&#x27;ai ici mis ma clef privÃ©e dans un autre fichier nommÃ© key.txt</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;key.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    privateKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>On peut maintenant signer la transaction et l&#x27;envoyer au rÃ©seau !</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx python"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">stx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sign_transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> private_key</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">txh </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> w3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">eth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send_raw_transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rawTransaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">hex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tx envoyÃ© au rÃ©seau : https://snowtrace.io/tx/{}&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">txh</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Plus qu&#x27;Ã  tester notre code et ...</p><p><img alt="Exemple simple swap" src="/assets/images/ExampleTx-fb59ebc79fe0ef6bcd97e4566997ae4b.png" width="1009" height="42"></p><p>Et voilÃ  notre tx est passÃ©e <a href="https://snowtrace.io/tx/0xada54d756583576cedf77ad7faa8dea936905dd01ce6f2e5a27bf41bb59a5c69" target="_blank" rel="noopener noreferrer"><em>(vous pouvez la voir ici)</em></a></p><p>N&#x27;hÃ©sitez pas Ã  essayer chez vous sur Fuji <a href="/dev/ressources/rpc">(en changeant le rpc)</a>.</p></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ethers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ethers&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PRIVATE_KEY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;XXX&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> provider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ethers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">providers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">JsonRpcProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://api.avax.network/ext/bc/C/rpc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> wallet </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ethers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Wallet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">PRIVATE_KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>Vous pouvez Ã©galement mettre votre clef privÃ©e dans un fichier externe (que l&#x27;on nommera key.txt) :</strong></p><p>Installez une libraire avec <code>npm install fs</code> qui vous permettra de lire et Ã©crire des fichiers</p><p>Ajoutez la librairire dans votre programme (en haut de votre programme) : <code>const fs = require(&quot;fs&quot;)</code></p><p>Puis changez la ligne suivante : <code>const PRIVATE_KEY = fs.readFileSync(&#x27;./key.txt&#x27;, &quot;utf-8&quot;);</code></p><p>Puis nous avons besoin de dÃ©finir un objet reprÃ©sentant le contrat avec lequel on veut interragir (ici le routeur de TraderJoe) et pour cela nous avons besoin de son ABI <a href="https://snowtrace.io/address/0x60aE616a2155Ee3d9A68541Ba4544862310933d4#code" target="_blank" rel="noopener noreferrer">que nous pouvons trouver ici</a></p><p><img alt="Copier l&amp;#39;ABI" src="/assets/images/ABIRouter-f4b81315e0a05c91f372cbe08391b6a1.png" width="1469" height="372"></p><p>Copiez le ensuite dans un fichier sÃ©parÃ© nommÃ© <em>router.json</em></p><p><img alt="Copier l&amp;#39;ABI 2" src="/assets/images/ExampleABIRouter-70f6e75453679d2d700b46e41f66e7cd.png" width="1877" height="669"></p><p>Une fois cela fait on peut dÃ©finir notre contrat</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// rajoutez cette ligne pour rÃ©cupÃ©rer le contenu de l&#x27;ABI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> routerABI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./router.json&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// On instencie le router</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> routerAddress </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x60aE616a2155Ee3d9A68541Ba4544862310933d4&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// router de Traderjoe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> router </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ethers</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Contract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">routerAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> routerABI</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wallet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Et voilÃ  notre 1er contrat dÃ©fini ! Voyons maintenant comment interragir avec !
Il existe 2 types de fonctions dans un SC :</p><ul><li>les <strong>view functions</strong> qui ne changent pas l&#x27;Ã©tat de la Blockchain et ne nÃ©cessitent donc pas de transaction : ce sont des fonctions qui renvoient juste une ou plusieurs valeurs</li><li>les <strong>fonctions classiques</strong> qui modifient l&#x27;Ã©tat de l&#x27;Ã©tat et nÃ©cessitent donc une transaction et de payer des frais</li></ul><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Exemple d&#x27;appel a une view function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">main</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> factoryAddress </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">factoryAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// la suite du code sera ici</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Executez votre programme avec : <code>node index.js</code></p><p><img alt="Exemple view function" src="data:image/png;base64,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" width="470" height="62"></p><p>Et voici ce que renvoie cette fonction par exemple (l&#x27;adresse du contrat factory de TraderJoe ici)</p><p>Sauf que nous voulons effectuer un swap et donc exÃ©cuter une transaction, par exemple nous allons swap 1 avax en USDT.e<br>
<!-- -->Pour Ã§a nous allons appeler la fonction swapExactAVAXForTokens qui prend en paramÃ¨tre plus arguments : </p><ul><li>amountOutMin : nombre de tokens que l&#x27;on veut au minimum (si on reÃ§oit moins la tx revert)</li><li>path : chemin empruntÃ© pour faire le swap (ici seulement WAVAX-&gt;USDT.e)</li><li>to : adresse qui reÃ§oit les tokens</li><li>deadline : date (timestamp)jusqu&#x27;Ã  laquelle notre transaction reste valide </li></ul><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> amountIn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// nombre d&#x27;AVAX que l&#x27;on veut Ã©changer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> amountOutMin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Ã©quivalent Ã  100% de slippage sur l&#x27;UI du DEX</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0xc7198437980c041c805A1EDcbA50c1Ce5db95118&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// WAVAX, USDT.e</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> to </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> wallet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">address</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deadline </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1 heure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> gasPrice </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getGasPrice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// formatage de notre variable en Big Number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ethers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parseUnits</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amountIn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ether&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// appel de la fonction swapExactAVAXForTokens avec nos variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> router</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">swapExactAVAXForTokens</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amountOutMin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deadline</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">gasLimit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">210000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">gasPrice</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> gasPrice</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;transaction sent...&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> receipt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">receipt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">receipt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">transactionHash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>On peut maintenant envoyer la transaction au rÃ©seau !</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">node</span><span class="token plain"> index.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><img alt="Exemple simple swap" src="/assets/images/sendTransactionJS-413c5255596717b812c1114b3e1374b5.png" width="889" height="240"></p></div></div></div></div></div></div></details></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dev/beginners/installation-des-outils"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Les outils de base pour dÃ©vlopper avec web3 sur Avalanche</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dev/advanced/tuto"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutoriel expert</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#affichez-votre-balance-davax" class="table-of-contents__link toc-highlight">Affichez votre balance d&#39;AVAX</a></li><li><a href="#echanger-des-avax-contre-des-usdte" class="table-of-contents__link toc-highlight">Echanger des AVAX contre des USDT.e</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Tutorial</a></li><li class="footer__item"><a href="https://1kl13nfpg5e.typeform.com/to/SoY1nOY6" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/NebulaeVentures" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://nebulae.substack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/company/nebul%C3%A6/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Nebulae Ventures. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4bf5e709.js"></script>
<script src="/assets/js/main.259ab867.js"></script>
</body>
</html>